# name: test/sql/session_timezone.test
# description: Test setting session time zone
# group: [sql]

require mysql_scanner

require-env MYSQL_TEST_DATABASE_AVAILABLE

statement ok
ATTACH 'host=localhost user=root port=0 database=mysqlscanner' AS msql (TYPE MYSQL_SCANNER)

statement ok
USE msql

query I
CALL mysql_query('msql', 'SELECT @@session.time_zone')
----
<REGEX>:^[^\-][^0][^5][^:][^0][^0].*

statement ok
SET mysql_session_time_zone = '-05:00'

query I
CALL mysql_query('msql', 'SELECT @@session.time_zone')
----
-05:00

statement ok
SET mysql_session_time_zone = ''

query I
CALL mysql_query('msql', 'SELECT @@session.time_zone')
----
<REGEX>:^[^\-][^0][^5][^:][^0][^0].*
